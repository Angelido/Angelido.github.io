:root{
  --radius:14px; --maxw:1200px; --shadow:0 10px 30px rgba(0,0,0,.25);
  /* fallback (verranno sovrascritti dal tema attivo) */
  --bg:#f6f8fc; --panel:#ffffff; --text:#1a1d25; --muted:#5f6b7a; --brand:#3b82f6; --accent:#16a34a;
}
/* CHIARO (default) */
html[data-theme="light"]{
  --bg:#f6f8fc;
  --panel:#ffffff;
  --text:#1a1d25;
  --muted:#5f6b7a;
  --brand:#3b82f6;
  --accent:#16a34a;
}
/* SCURO */
html[data-theme="dark"]{
  --bg:#14161d;
  --panel:#1a1d26;
  --text:#e9e9ee;
  --muted:#a5adbd;
  --brand:#809bff;
  --accent:#58d199;
}


*{box-sizing:border-box}html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(1200px 600px at 5% -10%, rgba(128,155,255,.14), transparent 60%),
    radial-gradient(1000px 500px at 105% 10%, rgba(88,209,153,.10), transparent 55%),
    var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  line-height:1.6;
}

img{max-width:100%;display:block}

/* === Layout base: DESKTOP-FIRST === */
.container{width:min(100% - 2.5rem,var(--maxw));margin-inline:auto}
.row{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}
.space-between{justify-content:space-between}
.grid{display:grid;gap:1rem}
.grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
.two-col{display:grid;grid-template-columns:1.2fr .8fr;gap:2rem}

.brand{font-weight:800;letter-spacing:.3px}
.nav{display:flex;align-items:center;justify-content:space-between;padding:1rem 0}
.nav-links{display:flex;align-items:center;gap:1rem}
.menu-btn{border:1px solid rgba(255,255,255,.18);background:transparent;border-radius:10px;padding:.5rem .7rem}
.mobile-menu{display:none;padding:.6rem 0 1rem}
.mobile-menu a{display:block;padding:.4rem 0}
.site-header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(150%) blur(8px);background:rgba(11,12,16,.7);border-bottom:1px solid rgba(255,255,255,.06)}
.site-footer{border-top:1px solid rgba(255,255,255,.08);padding:2rem 0;color:var(--muted)}

.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.1rem;border-radius:calc(var(--radius) - 4px);background:var(--brand);color:#fff;border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow);font-weight:600;text-decoration:none}
.btn:hover{text-decoration:none;filter:brightness(1.05)}
.btn-outline{background:transparent;color:var(--text);box-shadow:none}
.badge{display:inline-block;padding:.3rem .6rem;border-radius:999px;background:rgba(79,70,229,.14);color:#cdd0ff;font-weight:600;font-size:.85rem}
.card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:1rem;box-shadow:var(--shadow)}

/* Hero e tipografia (desktop base) */
.hero{padding:4.5rem 0 3rem}
.hero h1{font-size:clamp(2.2rem,2.5vw,3rem);line-height:1.15;margin:.2rem 0}
.kicker{color:var(--muted);font-size:1rem}
.section{margin:2.2rem 0}

/* Liste, timeline e pubblicazioni */
.list{display:grid;gap:.9rem}
.timeline{position:relative}
.timeline::before{content:"";position:absolute;left:.5rem;top:0;bottom:0;width:2px;background:rgba(255,255,255,.15)}
.tl-item{position:relative;padding-left:2rem}
.tl-dot{position:absolute;left:.2rem;top:.4rem;width:.7rem;height:.7rem;border-radius:50%;background:var(--accent)}
.pub-card{display:grid;gap:.35rem;padding:1rem;border:1px solid rgba(255,255,255,.08);border-radius:12px}
.pub-meta{color:var(--muted);font-size:.98rem}
.toolbar{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;margin:.6rem 0}
.input{padding:.6rem .8rem;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(17,19,26,.6);color:var(--text)}
.tags{display:flex;flex-wrap:wrap;gap:.4rem}
.tag{padding:.25rem .55rem;border:1px solid rgba(255,255,255,.2);border-radius:999px;font-size:.85rem;color:#cfe7d7}

/* === Adattamento MOBILE (< 900px) === */
@media(max-width:900px){
  .container{width:min(100% - 1.5rem,var(--maxw))}
  .hero{padding:3rem 0 2rem}
  .two-col{grid-template-columns:1fr;gap:1.2rem}
  .grid-3{grid-template-columns:1fr}
  .nav-links{gap:.8rem}
  .hero h1{font-size:clamp(1.8rem,6vw,2.4rem)}
}

/* ===== TOPBAR =================================================== */
.topbar{
  width:100%;
  background: var(--panel);
  border-bottom: 1px solid rgba(0,0,0,.08);
  display:flex;
  justify-content:flex-end;
  align-items:center;
  padding:.35rem .75rem;
}
html[data-theme="dark"] .topbar{ border-bottom-color: rgba(255,255,255,.12); }

.topbar-btn{
  display:inline-flex; align-items:center; justify-content:center;
  padding:.35rem .55rem;
  background: transparent;
  border: 1px solid rgba(0,0,0,.12);
  border-radius: 10px;
  cursor: pointer;
  color:#4b5563;                 /* colore icona in LIGHT */
}
html[data-theme="dark"] .topbar-btn{
  border-color: rgba(255,255,255,.18);
  color:#ffffff;                 /* icona bianca in DARK */
}
/* Bottone tema “invisibile” (solo icona) + colori moderni */
.theme-btn{
  border:none;
  background:transparent;
  padding:.25rem;
  cursor:pointer;

  /* colore icona in LIGHT: “nero vetro” */
  color:#020617; /* quasi nero, molto profondo */
}

/* Effetto “riflesso”/glow sulla icona tema */
.theme-btn .sunmoon{
  filter: drop-shadow(0 1px 2px rgba(15,23,42,.20));
}

html[data-theme="dark"] .theme-btn .sunmoon{
  filter: drop-shadow(0 0 6px rgba(248,245,236,.35));
}


html[data-theme="dark"] .theme-btn{
  border:none;
  /* colore icona in DARK: “avorio” caldo */
  color:#f8f5ec;
}

/* Focus tastiera: solo piccolo alone */
.theme-btn:focus-visible{
  outline:2px solid var(--brand);
  outline-offset:2px;
}




/* ===== LANGUAGE SWITCH ========================================= */
.topbar{
  width:100%;
  background: var(--panel);
  border-bottom: 1px solid rgba(0,0,0,.08);
  display:flex;
  justify-content:flex-end;
  align-items:center;
  gap:.5rem;                   /* piccolo spazio tra tema e lingua */
  padding:.35rem .75rem;
}

.lang-switch{
  position:relative;
}

.lang-btn{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
}

.lang-btn .flag{
  font-size:1rem;
}

.lang-btn .chevron{
  font-size:.7rem;
  opacity:.7;
  margin-left:.1rem;
}

.lang-menu{
  position:absolute;
  top:115%;
  right:0;
  background: var(--panel);
  border-radius:10px;
  border:1px solid rgba(0,0,0,.12);
  padding:.35rem;
  box-shadow:var(--shadow);
  display:flex;
  flex-direction:column;
  gap:.25rem;
  min-width:90px;
  z-index:100;
}

html[data-theme="dark"] .lang-menu{
  border-color: rgba(255,255,255,.18);
}

.lang-menu[aria-hidden="true"]{
  display:none;
}

.lang-item{
  display:flex;
  align-items:center;
  gap:.4rem;
  width:100%;
  padding:.35rem .6rem;
  border-radius:8px;
  background:transparent;
  border:1px solid transparent;
  color:var(--text);
  cursor:pointer;
  font-size:.9rem;
}

.lang-item .flag{
  font-size:1rem;
}

.lang-item.active{
  border-color: var(--brand);
}


/* ===== SUN ↔ MOON (SVG mask) =================================== */
.sunmoon{
  display:block;
  width:20px;          /* larghezza icona */
  height:20px;         /* altezza icona */
  transition: transform .35s ease;
}
.sunmoon .sunCore{ transition: transform .40s ease, opacity .40s ease; }
.sunmoon .rays{ transition: opacity .35s ease; }
.sunmoon .raysDiag{ transition: opacity .35s ease; }     /* NEW */
.sunmoon .crescent{ transition: opacity .35s ease; }
.sunmoon .cutout{ transition: cx .40s ease, cy .40s ease, r .40s ease; }
/* piccoli rettangoli (cardinali) netti sui pixel */
.sunmoon rect{ shape-rendering: crispEdges; }

/* LIGHT: sole pieno; raggi visibili (cardinali + diagonali); luna invisibile */
html[data-theme="light"] .sunmoon{ transform: rotate(0deg); }
html[data-theme="light"] .sunmoon .sunCore{ transform: scale(1); opacity: 1; }
html[data-theme="light"] .sunmoon .rays{ opacity: 1; }
html[data-theme="light"] .sunmoon .raysDiag{ opacity: 1; }   /* NEW */
html[data-theme="light"] .sunmoon .crescent{ opacity: 0; }
html[data-theme="light"] .sunmoon .cutout{ cx: 28px; cy: -4px; r: 9px; }

/* DARK: luna visibile; raggi spenti (tutti) */
html[data-theme="dark"] .sunmoon{ transform: rotate(18deg); }
html[data-theme="dark"] .sunmoon .sunCore{ transform: scale(.95); opacity: .9; }
html[data-theme="dark"] .sunmoon .rays{ opacity: 0; }
html[data-theme="dark"] .sunmoon .raysDiag{ opacity: 0; }    /* NEW */
html[data-theme="dark"] .sunmoon .crescent{ opacity: 1; }
html[data-theme="dark"] .sunmoon .cutout{ cx: 14px; cy: 10px; r: 9px; }